(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[74],{2142:function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"d",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return s})),t.d(a,"e",(function(){return m}));var l=t(28),n=t.n(l),r=function(){return n.a.get("/api/invoices/all")},c=function(e){return n.a.get("/api/invoices",{data:e})},i=function(e){return n.a.post("/api/invoices/delete",e)},s=function(e){return n.a.post("/api/invoices/add",e)},m=function(e){return n.a.post("/api/invoices/update",e)}},2875:function(e,a,t){"use strict";t.r(a);var l=t(26),n=t(1),r=t.n(n),c=t(1469),i=t(5),s=t(17),m=t(687),u=t(1441),o=t(1411),d=t(1446),b=t(1542),E=t(1642),p=t(1543),f=t(1593),v=t(1544),N=t(53),g=t(60),O=t(2142),j=t(2790),h=t(1410),y=t(4),x=["palette"],w=Object(h.a)((function(e){e.palette,Object(s.a)(e,x);return{"@global":{"@media print":{"body, *, html":{visibility:"hidden"},"#print-area":{position:"fixed",top:0,left:0,right:0,height:"100%","& *":{visibility:"visible"}}}},invoiceViewer:{"& h5":{fontSize:15}}}})),C=function(e){var a=e.toggleInvoiceEditor,t=Object(n.useState)({}),s=Object(l.a)(t,2),h=s[0],x=s[1],C=Object(N.i)().id,M=w();Object(n.useEffect)((function(){"add"!==C&&Object(O.d)(C).then((function(e){x(Object(i.a)({},e.data))}))}),[C]);var q=0,T=h.orderNo,V=h.buyer,I=h.seller,z=h.item,S=void 0===z?[]:z,k=h.status,P=h.vat,W=h.date;return r.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",M.invoiceViewer)},r.a.createElement("div",{className:"viewer_actions px-4 mb-5 flex items-center justify-between"},r.a.createElement(g.a,{to:"/invoice/list"},r.a.createElement(m.a,null,r.a.createElement(u.a,null,"arrow_back"))),r.a.createElement("div",null,r.a.createElement(o.a,{className:"mr-4 py-2",variant:"contained",color:"primary",onClick:function(){return a()}},"Edit Invoice"),r.a.createElement(o.a,{onClick:function(){return window.print()},className:"py-2",variant:"contained",color:"secondary"},"Print Invoice"))),r.a.createElement("div",{id:"print-area"},r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Order Info"),r.a.createElement("p",{className:"mb-4"},"Order Number"),r.a.createElement("p",{className:"mb-0"},"# ",T)),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal mb-4 capitalize"},r.a.createElement("strong",null,"Order status:")," ",k),r.a.createElement("h5",{className:"font-normal capitalize"},r.a.createElement("strong",null,"Order date: ")," ",r.a.createElement("span",null,W?Object(j.a)(new Date(W).getTime(),"MMMM dd, yyyy"):"")))),r.a.createElement(d.a,null),r.a.createElement("div",{className:"viewer__billing-info px-4 py-5 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Bill From"),r.a.createElement("p",{className:"mb-4"},I?I.name:null),r.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},I?I.address:null)),r.a.createElement("div",{className:"text-right w-full"},r.a.createElement("h5",{className:"mb-2"},"Bill To"),r.a.createElement("p",{className:"mb-4"},V?V.name:null),r.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},V?V.address:null)),r.a.createElement("div",null)),r.a.createElement(c.a,{className:"mb-4",elevation:0},r.a.createElement(b.a,null,r.a.createElement(E.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{className:"pl-sm-24"},"#"),r.a.createElement(f.a,{className:"px-0"},"Item Name"),r.a.createElement(f.a,{className:"px-0"},"Unit Price"),r.a.createElement(f.a,{className:"px-0"},"Unit"),r.a.createElement(f.a,{className:"px-0"},"Cost"))),r.a.createElement(v.a,null,S.map((function(e,a){return q+=e.unit*e.price,r.a.createElement(p.a,{key:a},r.a.createElement(f.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.name),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.price),r.a.createElement(f.a,{className:"pl-0 capitalize"},e.unit),r.a.createElement(f.a,{className:"pl-0"},e.unit*e.price))}))))),r.a.createElement("div",{className:"px-4 flex justify-end"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"pr-12"},r.a.createElement("p",{className:"mb-4"},"Sub Total:"),r.a.createElement("p",{className:"mb-4"},"Vat(%):"),r.a.createElement("strong",null,r.a.createElement("p",null,"Grand Total:"))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-4"},q),r.a.createElement("p",{className:"mb-4"},P),r.a.createElement("p",null,r.a.createElement("strong",null,"$",q+=q*P/100)))))))},M=t(13),q=t(20),T=t(688),V=t(1571),I=t(1412),z=t(1749),S=t(1468),k=t(120),P=t(1746),W=t(2092),_=t(2049),B=["palette"],D=Object(h.a)((function(e){e.palette,Object(s.a)(e,B);return{invoiceEditor:{"& h5":{fontSize:15}}}})),U={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1},A=function(e){var a=e.isNewInvoice,t=e.toggleInvoiceEditor,c=Object(n.useState)(!0),s=Object(l.a)(c,2),m=s[0],u=s[1],g=Object(n.useState)(U),j=Object(l.a)(g,2),h=j[0],x=j[1],w=Object(N.g)(),C=Object(N.i)().id,B=D(),A=Object(n.useCallback)((function(){var e=Math.random().toString(),a=e.substr(2,e.length-1);x((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:a})}))}),[]),F=function(e){e.persist(),x(Object(i.a)(Object(i.a)({},h),{},Object(q.a)({},e.target.name,e.target.value)))},G=function(e,a){e.persist(),x(Object(i.a)(Object(i.a)({},h),{},Object(q.a)({},a,Object(i.a)(Object(i.a)({},h[a]),{},Object(q.a)({},e.target.name,e.target.value)))))},J=function(e,a){var t=Object(M.a)(h.item);t.map((function(t,l){return a===l&&(t[e.target.name]=e.target.value),t})),x(Object(i.a)(Object(i.a)({},h),{},{item:t}))};Object(n.useEffect)((function(){a?A():Object(O.d)(C).then((function(e){var a=e.data;m&&x(Object(i.a)({},a))}))}),[C,a,m,A]),Object(n.useEffect)((function(){return function(){return u(!1)}}),[]);var K=0,$=h.orderNo,H=h.buyer,L=h.seller,Q=h.item,R=void 0===Q?[]:Q,X=h.status,Y=h.vat,Z=h.date,ee=h.currency,ae=h.loading;return r.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",B.invoiceEditor)},r.a.createElement(k.ValidatorForm,{onSubmit:function(){x(Object(i.a)(Object(i.a)({},h),{},{loading:!0}));var e=Object(i.a)({},h);delete e.loading,a?Object(O.a)(e).then((function(){x(Object(i.a)(Object(i.a)({},h),{},{loading:!1})),w.push("/invoice/".concat(h.id)),t()})):Object(O.e)(e).then((function(){x(Object(i.a)(Object(i.a)({},h),{},{loading:!1})),t()}))},onError:function(e){return null}},r.a.createElement("div",{className:"viewer_actions px-4 flex justify-end"},r.a.createElement("div",{className:"mb-6"},r.a.createElement(o.a,{type:"button",className:"mr-4 py-2",variant:"text",onClick:function(){return t()}},"Cancel"),r.a.createElement(o.a,{type:"submit",className:"py-2",variant:"contained",color:"primary",disabled:ae},"Save"))),r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Order Info"),r.a.createElement("p",{className:"mb-4"},"Order Number"),r.a.createElement(k.TextValidator,{label:"Order No.",type:"text",fullWidth:!0,name:"orderNo",value:$,onChange:F,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement("div",null,r.a.createElement(T.a,{component:"fieldset",className:"w-full mb-4"},r.a.createElement(V.a,{"aria-label":"status",name:"status",value:X,onChange:F},r.a.createElement(I.a,{className:"h-32",value:"pending",control:r.a.createElement(z.a,{color:"secondary"}),label:"Pending",labelPlacement:"start"}),r.a.createElement(I.a,{className:"h-32",value:"processing",control:r.a.createElement(z.a,{color:"secondary"}),label:"Processing",labelPlacement:"start"}),r.a.createElement(I.a,{className:"h-32",value:"delivered",control:r.a.createElement(z.a,{color:"secondary"}),label:"Delivered",labelPlacement:"start"}))),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal"},r.a.createElement("strong",null,"Order date: "))),r.a.createElement(P.a,{utils:_.a},r.a.createElement(W.a,{margin:"none",id:"mui-pickers-date",label:"Order Date",inputVariant:"standard",type:"text",autoOk:!0,value:Z,fullWidth:!0,format:"MMMM dd, yyyy",onChange:function(e){x(Object(i.a)(Object(i.a)({},h),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement(d.a,null),r.a.createElement(S.a,{className:"px-4 py-5",container:!0,justify:"space-between",spacing:4},r.a.createElement(S.a,{item:!0},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-5 "},"Bill From"),r.a.createElement(k.TextValidator,{className:"mb-5",label:"Seller Name",onChange:function(e){return G(e,"seller")},type:"text",name:"name",fullWidth:!0,value:L?L.name:null,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement(k.TextValidator,{label:"Seller Name",type:"text",onChange:function(e){return G(e,"seller")},name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:L?L.address:null,validators:["required"],errorMessages:["this field is required"]}))),r.a.createElement(S.a,{item:!0},r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"mb-5"},"Bill To"),r.a.createElement(k.TextValidator,{className:"mb-5",label:"Buyer Name",onChange:function(e){return G(e,"buyer")},type:"text",name:"name",fullWidth:!0,value:H?H.name:null,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement(k.TextValidator,{label:"Buyer Address",onChange:function(e){return G(e,"buyer")},type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:H?H.address:null,validators:["required"],errorMessages:["this field is required"]})))),r.a.createElement(b.a,{className:"mb-4"},r.a.createElement(E.a,null,r.a.createElement(p.a,{className:"bg-default"},r.a.createElement(f.a,{className:"pl-sm-24"},"#"),r.a.createElement(f.a,{className:"px-0"},"Item Name"),r.a.createElement(f.a,{className:"px-0"},"Unit Price"),r.a.createElement(f.a,{className:"px-0"},"Unit"),r.a.createElement(f.a,{className:"px-0"},"Cost"),r.a.createElement(f.a,{className:"px-0"},"Action"))),r.a.createElement(v.a,null,R.map((function(e,a){return K+=e.price*e.unit,r.a.createElement(p.a,{key:a},r.a.createElement(f.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Name",onChange:function(e){return J(e,a)},type:"text",name:"name",fullWidth:!0,value:e?e.name:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Price",onChange:function(e){return J(e,a)},type:"number",name:"price",fullWidth:!0,value:e?e.price:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Unit",onChange:function(e){return J(e,a)},type:"number",name:"unit",fullWidth:!0,value:e?e.unit:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},e.unit*e.price),r.a.createElement(f.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(o.a,{onClick:function(){return function(e){var a=Object(M.a)(h.item);a.splice(e,1),x(Object(i.a)(Object(i.a)({},h),{},{item:a}))}(a)}},"Delete")))})))),r.a.createElement("div",{className:"flex justify-end px-4 mb-4"},r.a.createElement(o.a,{onClick:function(){var e=Object(M.a)(h.item);e.push({name:"",unit:"",price:""}),x(Object(i.a)(Object(i.a)({},h),{},{item:e}))}},"Add Item")),r.a.createElement("div",{className:"px-4 flex justify-end"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"pr-12"},r.a.createElement("p",{className:"mb-8"},"Sub Total:"),r.a.createElement("p",{className:"mb-12"},"Vat(%):"),r.a.createElement("p",{className:"mb-5"},"currency:"),r.a.createElement("strong",null,r.a.createElement("p",null,"Grand Total:"))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-4"},K),r.a.createElement(k.TextValidator,{className:"mb-4",label:"Vat",onChange:F,type:"number",name:"vat",value:Y,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement("br",null),r.a.createElement(k.TextValidator,{label:"Currency",onChange:F,type:"text",name:"currency",value:ee,validators:["required"],errorMessages:["this field is required"]}),r.a.createElement("p",{className:"mt-4"},r.a.createElement("strong",null,ee,K+K*Y/100)))))))};a.default=function(){var e=Object(n.useState)(!1),a=Object(l.a)(e,2),t=a[0],i=a[1],s=Object(n.useState)(!1),m=Object(l.a)(s,2),u=m[0],o=m[1],d=Object(N.i)().id,b=function(){i(!t),o(!1)};return Object(n.useEffect)((function(){"add"===d&&(i(!0),o(!0))}),[d]),r.a.createElement(c.a,{elevation:6,className:"m-sm-30"},t?r.a.createElement(A,{toggleInvoiceEditor:b,isNewInvoice:u}):r.a.createElement(C,{toggleInvoiceEditor:b}))}}}]);
//# sourceMappingURL=74.88aaaa4b.chunk.js.map